import {BaseAction} from "../../../core/engine/fsm/BaseAction";
import {AppLogger} from "../../../core/utils/logger/AppLogger";
import {EventDispatcher, LoaderConstants, LoadEvents} from "general-framework";

export class LoadBitmapFontsPreloadAction extends BaseAction {

    protected generalDispatcher: EventDispatcher = EventDispatcher.getInstance();

    execute(): Promise<any> {
        AppLogger.log(`${this.constructor.name}`);
        return new Promise<any>((resolve) => {
            this.generalDispatcher.once(LoadEvents.BITMAP_FONTS_LOADED, () => {
                resolve();
            });
            this.generalDispatcher.dispatch(LoadEvents.LOAD_BITMAP_FONTS, LoaderConstants.PRELOAD_PRIORITY);
        });
    }


}
