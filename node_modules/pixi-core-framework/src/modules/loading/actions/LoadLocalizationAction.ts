import {BaseAction} from "../../../core/engine/fsm/BaseAction";
import {EventDispatcher, GameInfo, LoaderModel, LoadEvents} from "general-framework";
import {ConfigPathData} from "../../../ConfigPathData";

export class LoadLocalizationAction extends BaseAction{

    protected generalDispatcher: EventDispatcher = EventDispatcher.getInstance();

    execute(): Promise<any> {
        return new Promise<any>((resolve) => {
            GameInfo.init("");
            LoaderModel.i18nPaths = ConfigPathData.I18N_PREFIX_PATH;
            this.generalDispatcher.addListener(LoadEvents.LOCALIZATION_LOADED, () => {
                resolve();
            });
            this.generalDispatcher.dispatch(LoadEvents.LOAD_LOCALIZATION);
        });
    }

}
