import {BaseMediator} from "../../core/engine/BaseMediator";
import {RendererManagerEvents} from "../renderModule/events/RendererManagerEvents";
import {IRenderViewParams} from "../renderModule/IRenderViewParams";
import {BackgroundsView} from "./BackgroundsView";
import {BackgroundsEvents} from "./events/BackgroundsEvents";

/**
 * Framework logic part
 */
export class BackgroundsViewMediator extends BaseMediator {
    protected view: BackgroundsView;

    addListeners(): void {
        super.addListeners();
        this.dispatcher.addListener(RendererManagerEvents.RESIZE, this.onResize.bind(this));
        this.dispatcher.addListener(BackgroundsEvents.SHOW_BACKGROUND, this.onBackgroundChange.bind(this));
    }

    protected onResize(params: IRenderViewParams): void {
        this.view.onResize(params);
    }

    protected onBackgroundChange(backgroundID: string): void {
        this.view.show();
        this.view.changeBackground(backgroundID);
    }
}
