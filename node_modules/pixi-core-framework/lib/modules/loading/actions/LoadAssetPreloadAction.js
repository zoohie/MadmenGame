import { BaseAction } from "../../../core/engine/fsm/BaseAction";
import { AppLogger } from "../../../core/utils/logger/AppLogger";
import { EventDispatcher, LoadEvents, LoaderConstants } from "general-framework";
export class LoadAssetPreloadAction extends BaseAction {
    constructor() {
        super(...arguments);
        this.generalDispatcher = EventDispatcher.getInstance();
    }
    execute() {
        AppLogger.log(`${this.constructor.name}`);
        return new Promise((resolve) => {
            this.generalDispatcher.once(LoadEvents.ASSET_LOADED, () => {
                this.generalDispatcher.dispatch(LoadEvents.REMOVE_PRELOADER, LoaderConstants.PRELOAD_PRIORITY);
                resolve();
            });
            this.generalDispatcher.dispatch(LoadEvents.LOAD_ASSETS, LoaderConstants.PRELOAD_PRIORITY);
        });
    }
}
//# sourceMappingURL=LoadAssetPreloadAction.js.map