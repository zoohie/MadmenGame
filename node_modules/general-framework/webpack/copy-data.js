const fse = require('fs-extra');
const fs = require('fs');
const path = require('path');
const currentDir = path.join(__dirname, '..');

function replacePath(value) {
    return value.replace(/\\/g, '/');
}

function copyData(fromPath, toPath) {
    fse.copySync(fromPath, toPath, {overwrite: true}, function (err) {
        if (err) {
            console.error(err);

        } else {
            console.log("success!");
        }
    });
}

function readJsonData() {
    fs.readFile('./copy-local-data.json', 'utf8', (err, jsonString) => {
        if (err) {
            console.log("Error reading file from disk:", err);
            return
        }
        try {
            const copyDataPath = JSON.parse(jsonString);
            for (let i = 0; i < copyDataPath.path.length; i++) {
                copyData(replacePath(path.join(currentDir, copyDataPath.path[i].from)), replacePath(copyDataPath.path[i].to))
            }

        } catch (err) {
            console.log('Error parsing JSON string:', err)
        }
    })

}

readJsonData();


