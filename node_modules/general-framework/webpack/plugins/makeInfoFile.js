const fs = require('fs');
const path = require('path');


module.exports = class MakeInfoFilePlugin {
    constructor({output, buildTimestamp}) {
        this.output = output;
        this.buildTimestamp = buildTimestamp;
    }

    apply(compiler) {
        compiler.hooks.done.tap(
            'MakeInfoFilePlugin',
            (compilation) => {
                const filePath = path.join(this.output, 'additionalInfo.txt');
                const text = 'dynamicFolderName = ' + this.buildTimestamp;
                fs.writeFile(filePath, text, (err) => {
                    if (err) throw err;
                });
            }
        );
    }
};
