const path = require('path');

const getVideoSources = (video) => {
    return video.reduce((acc, item, index) => {
        return acc += `<source src="logo/${path.basename(item)}#t=0,2"`
            + ` type='${path.extname(item) === '.webm' ? 'video/webm; codecs="vp8, vorbis"' : 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}'>`
            + `${index !== video.length - 1 ? '\n\t\t\t' : ''}`
    }, '')
};

module.exports = (video) => `
<div id="gameLogo">
    <div class="video-container">
        <video autoplay muted playsinline>
            ${getVideoSources(video)}
        </video>
        <div>
            <div id="logo-progress-bar">
                <svg viewBox="0 0 1500 150" xmlns="http://www.w3.org/2000/svg">
                    <polygon fill="#ecbb41" points="0,150 31,0 1500,0 0,150"/>
                </svg>
            </div>
        </div>
    </div>
</div>`;

