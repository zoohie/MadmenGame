import { AppLogger } from "../logger/AppLogger";
export class PingController {
    static get data() {
        return this._data;
    }
    static set data(value) {
        this._data = value;
    }
    /**
     * start ping timer
     */
    static startPing() {
        if (this.data && this.data.url && this.data.url.length > 0) {
            this.startPingTimer();
            window.onclose = this.ping.bind(this);
        }
    }
    static startPingTimer() {
        setTimeout(this.ping.bind(this), this.data.time_elapsed);
    }
    /**
     * send ping message
     */
    static ping() {
        const xhr = new XMLHttpRequest();
        xhr.open(this.data.method, this.data.url, true);
        xhr.setRequestHeader("Content-Type", this.data.data_type);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                AppLogger.log("Ping success");
            }
        };
        xhr.send(this.data.send_parameters);
        this.startPingTimer();
    }
}
//# sourceMappingURL=PingController.js.map