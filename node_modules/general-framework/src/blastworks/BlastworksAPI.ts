import {BlastworksEvents} from "./BlastworksEvents";

export class BlastworksAPI {
    private static _isBlastworksPostMessage: boolean = false;
    public static get isBlastworksPostMessage(): boolean {
        return this._isBlastworksPostMessage;
    }
    public static set isBlastworksPostMessage(value: boolean) {
        this._isBlastworksPostMessage = value;
    }
    public static postData(event?: string, options?: any): void {
        BlastworksEvents.messageList.forEach((item) => {
            if (item.event === event) {
                let data = {};
                if (options) {
                    item.data = options;
                }
                data["name"] = item.message;
                data["data"] = item.data;
                if(window.location !== window.parent.location) { // check if iframe
                    parent.postMessage(data, "*")
                } else {
                    window.postMessage(data, "*")
                }
            }
        })
    }
}